CREATE OR REPLACE PROCEDURE sp_ListarOpciones
(
  p_idCatalogoTipo IN  APL_TB_CATALOGOTIPO.IDCATALOGOTIPO%TYPE,
  p_cursor         OUT SYS_REFCURSOR
)
AS
BEGIN
  OPEN p_cursor FOR
    SELECT
      o.idopcion,
      o.nombre        AS opcion_nombre,
      o.descripcion   AS opcion_descripcion,
      o.vista,
      o.idestado,
      c.idcatalogo,
      c.nombre        AS catalogo_nombre,
      c.adicional,
      c.abreviatura,
      c.idcatalogotipo,
      ct.nombre       AS catalogotipo_nombre
    FROM   APL_TB_OPCIONES      o
    JOIN   APL_TB_CATALOGO      c  ON c.idcatalogo      = o.idgrupo
    JOIN   APL_TB_CATALOGOTIPO  ct ON ct.idcatalogotipo = c.idcatalogotipo
    WHERE  c.idcatalogotipo = p_idCatalogoTipo
    ORDER BY ct.nombre, c.nombre, o.nombre;
END;
/


======pruebas
VAR rc REFCURSOR;
EXEC sp_ListarOpciones(p_idCatalogoTipo => 9, p_cursor => :rc);
PRINT rc;
